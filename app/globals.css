@import "tailwindcss";

/* ── Class-based dark mode for next-themes ─────────────────────────── */
@custom-variant dark (&:is(.dark *));

/* ── Light / Dark CSS variables ────────────────────────────────────── */
:root {
  --theme-bg-page: #f5f0e8;
  --theme-bg-surface: rgba(120, 113, 108, 0.07);
  --theme-bg-surface-hover: rgba(120, 113, 108, 0.12);
  --theme-bg-elevated: rgba(255, 255, 255, 0.92);
  --theme-bg-input: rgba(255, 255, 255, 0.85);
  --theme-bg-overlay: rgba(255, 255, 255, 0.75);
  --theme-text-heading: #1c1917;
  --theme-text-body: #44403c;
  --theme-text-muted: #78716c;
  --theme-text-faint: #a8a29e;
  --theme-border: rgba(28, 25, 23, 0.13);
  --theme-border-subtle: rgba(28, 25, 23, 0.06);
}

.dark {
  --theme-bg-page: #0f0a1a;
  --theme-bg-surface: rgba(255, 255, 255, 0.05);
  --theme-bg-surface-hover: rgba(255, 255, 255, 0.1);
  --theme-bg-elevated: rgba(0, 0, 0, 0.8);
  --theme-bg-input: rgba(0, 0, 0, 0.45);
  --theme-bg-overlay: rgba(0, 0, 0, 0.3);
  --theme-text-heading: #ffffff;
  --theme-text-body: #d6d3d1;
  --theme-text-muted: #a8a29e;
  --theme-text-faint: #78716c;
  --theme-border: rgba(255, 255, 255, 0.1);
  --theme-border-subtle: rgba(255, 255, 255, 0.05);
}

/* ── Theme tokens ───────────────────────────────────────────────────── */
@theme inline {
  /* Semantic palette — auto-switches with .dark class */
  --color-page: var(--theme-bg-page);
  --color-surface: var(--theme-bg-surface);
  --color-surface-hover: var(--theme-bg-surface-hover);
  --color-elevated: var(--theme-bg-elevated);
  --color-input-bg: var(--theme-bg-input);
  --color-overlay: var(--theme-bg-overlay);
  --color-heading: var(--theme-text-heading);
  --color-body: var(--theme-text-body);
  --color-muted: var(--theme-text-muted);
  --color-faint: var(--theme-text-faint);
  --color-line: var(--theme-border);
  --color-line-subtle: var(--theme-border-subtle);

  /* Static tokens */
  --color-background: var(--theme-bg-page);
  --color-foreground: var(--theme-text-heading);
  --font-sans: var(--font-geist-sans), var(--font-khmer);
  --font-mono: var(--font-geist-mono);

  /* Custom animations exposed as Tailwind utilities */
  --animate-float-soft: float-soft 8s ease-in-out infinite;
  --animate-card-enter: card-enter 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  --animate-field-reveal: field-reveal 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  --animate-title-reveal: title-reveal 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  --animate-error-shake: error-shake 0.45s cubic-bezier(0.22, 1, 0.36, 1);
  --animate-success-pulse: success-pulse 1.5s ease-in-out infinite;
  --animate-glow-text: glow-text 3s ease-in-out infinite;
}

/* ── Keyframes ──────────────────────────────────────────────────────── */
@keyframes float-soft {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(6px, -8px) scale(1.02); }
  66% { transform: translate(-4px, 4px) scale(0.98); }
}

@keyframes card-enter {
  from { opacity: 0; transform: scale(0.96) translateY(24px); filter: blur(8px); }
  to { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); }
}

@keyframes field-reveal {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes title-reveal {
  from { opacity: 0; transform: translateY(-12px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes error-shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  40% { transform: translateX(6px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}

@keyframes success-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
  50% { box-shadow: 0 0 0 6px rgba(34, 197, 94, 0.1); }
}

@keyframes glow-text {
  0%, 100% { text-shadow: 0 0 10px rgba(217, 119, 6, 0.5), 0 0 20px rgba(184, 134, 11, 0.3); }
  50% { text-shadow: 0 0 20px rgba(217, 119, 6, 0.8), 0 0 30px rgba(184, 134, 11, 0.6); }
}

@keyframes btn-shine {
  0% { background-position: 200% center; }
  100% { background-position: -200% center; }
}

/* ── Minimal global styles ──────────────────────────────────────────── */
html {
  scroll-behavior: smooth;
}

body {
  background: var(--theme-bg-page);
  color: var(--theme-text-body);
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Button shine overlay — needs ::after pseudo-element */
.btn-shine {
  position: relative;
  overflow: hidden;
}

.btn-shine::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    105deg,
    transparent 0%,
    rgba(255, 255, 255, 0.15) 45%,
    rgba(255, 255, 255, 0.25) 50%,
    rgba(255, 255, 255, 0.15) 55%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: btn-shine 4s linear infinite;
  pointer-events: none;
}
